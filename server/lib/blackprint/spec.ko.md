# blackprint - 더럽게 단순한 HTML 템플릿 엔진

blackprint는 Deno를 위해 만들어진 더럽게 단순한, HTML 기반의, 서버사이드 렌더링되는 HTML 템플릿 엔진입니다.

## spec
blackprint 문서의 "확장자"는 `.bp.html`로 끝나야 합니다.

blackprint는 아래와 같은 특별한 태그를 사용합니다.

- `<ref!>`
- `<for!>`
- `<if!>`

blackprint는 텍스트 혹은 HTML 속성 값 내에서,
`{{ content }}`처럼 중괄호 2개로 둘러싸인 문자열을 변수식으로 평가하여 대체합니다.

### 변수식

blackprint의 변수식은 다음과 같이 생겼습니다:

    foo
    foo[1]
    foo.bar[baz][123]

그리고 이게 다입니다. 템플릿에 주어진 데이터를 참조하고 읽는 것만 할 수 있습니다.

### ref!

    <ref! [var=?|import=?]></ref!>

ref 태그는 `var`의 변수값 혹은 `import`가 가리키는 문서의 내용으로 자기 자신을 대체합니다.
받아온 내용을 검사하지 않고 그대로 대체하지만, 닫는 태그가 있는 완전한 HTML이어야 합니다.

'`import` 속성이 가리키는 문서'는 템플릿을 사용하는 측에서 제공해 주어야 합니다.

### for!

    <for! [var=?] of=? [limit=?] [reversed]> </for!>

for 태그는 `of` 속성의 값을 가지고 자식 요소들을 열거합니다.

- `of` 속성의 값이 정수일 경우, 그 횟수만큼 자식 요소들을 반복합니다. `var`에는 반복한 횟수(0부터 시작)가 들어갑니다.
- `of` 속성의 값이 배열일 경우, 그 배열의 요소들을 열거합니다. `var`에는 배열의 요소가 들어갑니다.
- 이외의 경우, 오류를 발생합니다.

`var` 속성의 값은 일종의 '변수명'처럼 취급됩니다. 이 노드의 자식 노드들에서 해당 변수를 사용할 수 있습니다.

`limit` 속성은 최대 열거 횟수를 지정합니다. 변수식을 사용할 수 있습니다.

`reversed` 속성이 있다면 열거되는 태그의 순서가 반대로 뒤집힙니다.

### if!

    <if! [not] cond=? [is-empty]> </if!>

if 태그는 주어진 조건에 따라 자식 태그를 보이거나 제거합니다.

- `cond` 속성의 변수가 정의되지 않았거나, 그 값이 정확히 `false`라면 거짓입니다.
- `is-empty` 속성이 있다면, `cond` 속성의 변수 값이 배열이며 그 크기가 0일 경우에도 거짓입니다.
- `not` 속성이 있다면, 위 조건을 반전합니다.
- 거짓일 경우 이 태그와 그 자식 노드는 삭제됩니다. 그렇지 않을 경우 이 태그는 자기 자신을 자식 노드로 대체합니다.
